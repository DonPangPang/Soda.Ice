@page "/search"

<PageTitle>搜索</PageTitle>

<MTextField Label="请输入搜索的内容"
            TValue="string"
            Outlined
             Loading="_loading"
             ValueChanged="QuerySelections"
             AppendIcon="mdi-magnify" Class="rounded-lg">
 </MTextField>
 <TagsPanel></TagsPanel>
 <SearchList Search="@_search" Items="@MachItems"></SearchList>

 @code {
    private bool _loading;
    string _search = string.Empty;
    private List<VBlogTiny> MachItems = new List<VBlogTiny>();

    List<VBlogTiny> Blogs = new List<VBlogTiny>()
    {

    };

    protected override Task OnInitializedAsync()
    {
        foreach (var item in Enumerable.Range(1, 10))
        {
            Blogs.Add(new VBlogTiny()
                {
                    Title = "这是一个测试标题",
                    Descrption = "这是一个测试内容这是一个测试内容这是一个测试内容这是一个测试内容这是一个测试内容这是一个测试内容这是一个测试内容这是一个测试内容这是一个测试内容这是一个测试内容这是一个测试内容",
                });
        }

        return base.OnInitializedAsync();
    }

    private async Task QuerySelections(string v)
    {
        if (string.IsNullOrWhiteSpace(v))
        {
            MachItems.Clear();
            return;
        }

        _search = v;
        _loading = true;
        MachItems = Blogs.Where(x => x.Title.Contains(v) || x.Descrption.Contains(v)).ToList();
        // await Task.Delay(5000);
        _loading = false;
    }
}
